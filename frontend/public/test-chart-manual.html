<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Chart Test</title>
</head>
<body>
    <h1>Manual Chart Test</h1>

    <h2>Test 1: Direct URL</h2>
    <img id="directChart" src="https://quickchart.io/chart?width=200&c=%7B%22type%22%3A%22bar%22%2C%22data%22%3A%7B%22labels%22%3A%5B%22Kedah%22%2C%22Selangor%22%5D%2C%22datasets%22%3A%5B%7B%22label%22%3A%22Population%202015%22%2C%22data%22%3A%5B2045300%2C6231800%5D%2C%22backgroundColor%22%3A%5B%22rgba(75%2C%20192%2C%20192%2C%200.2)%22%2C%22rgba(54%2C%20162%2C%20235%2C%200.2)%22%5D%2C%22borderColor%22%3A%5B%22rgba(75%2C%20192%2C%20192%2C%201)%22%2C%22rgba(54%2C%20162%2C%20235%2C%201)%22%5D%2C%22borderWidth%22%3A1%7D%5D%7D%2C%22options%22%3A%7B%22scales%22%3A%7B%22yAxes%22%3A%5B%7B%22ticks%22%3A%7B%22max%22%3A7000000%2C%22min%22%3A0%2C%22stepSize%22%3A1000000%2C%22beginAtZero%22%3Atrue%7D%2C%22stacked%22%3Afalse%7D%5D%2C%22xAxes%22%3A%7B%22stacked%22%3Afalse%7D%7D%2C%22plugins%22%3A%7B%22title%22%3A%7B%22display%22%3Atrue%2C%22text%22%3A%22Total%20Population%20Comparison%20between%20Kedah%20and%20Selangor%20in%202015%22%7D%2C%22legend%22%3A%7B%22display%22%3Atrue%2C%22position%22%3A%22top%22%7D%7D%7D%7D"
         alt="Direct Chart Test"
         style="max-width: 100%; border: 1px solid #ccc;"
         onload="this.style.border='2px solid green'; console.log('‚úÖ Direct chart loaded')"
         onerror="this.style.border='2px solid red'; console.log('‚ùå Direct chart failed')">

    <h2>Test 2: Simplified URL</h2>
    <img id="simplifiedChart" src="https://quickchart.io/chart?c=%7B%22type%22%3A%22bar%22%2C%22data%22%3A%7B%22labels%22%3A%5B%22Kedah%22%2C%22Selangor%22%5D%2C%22datasets%22%3A%5B%7B%22label%22%3A%22Population%202015%22%2C%22data%22%3A%5B2045300%2C6231800%5D%7D%5D%7D"
         alt="Simplified Chart Test"
         style="max-width: 100%; border: 1px solid #ccc;"
         onload="this.style.border='2px solid green'; console.log('‚úÖ Simplified chart loaded')"
         onerror="this.style.border='2px solid red'; console.log('‚ùå Simplified chart failed')">

    <h2>Test 3: Basic Chart</h2>
    <img id="basicChart" src="https://quickchart.io/chart?c=%7B%22type%22%3A%22bar%22%2C%22data%22%3A%7B%22labels%22%3A%5B%22A%22%2C%22B%22%5D%2C%22datasets%22%3A%5B%7B%22label%22%3A%22Data%22%2C%22data%22%3A%5B1%2C2%5D%7D%5D%7D%7D"
         alt="Basic Chart Test"
         style="max-width: 100%; border: 1px solid #ccc;"
         onload="this.style.border='2px solid green'; console.log('‚úÖ Basic chart loaded')"
         onerror="this.style.border='2px solid red'; console.log('‚ùå Basic chart failed')">

    <h2>Console Test Results</h2>
    <div id="results"></div>

    <script>
        // Test the pattern matching
        const testContent = `Here is the requested comparison of total population between Kedah and Selangor in 2015:

**Total Population Comparison between Kedah and Selangor in 2015**

Based on the available data, here are the total population figures:

- **Kedah**: 2,045,300 people
- **Selangor**: 6,231,800 people

This shows that Selangor had approximately 3 times the population of Kedah in 2015.

**Chart Visualization**
https://quickchart.io/chart?width=200&c=%7B%22type%22%3A%22bar%22%2C%22data%22%3A%7B%22labels%22%3A%5B%22Kedah%22%2C%22Selangor%22%5D%2C%22datasets%22%3A%5B%7B%22label%22%3A%22Population%202015%22%2C%22data%22%3A%5B2045300%2C6231800%5D%2C%22backgroundColor%22%3A%5B%22rgba(75%2C%20192%2C%20192%2C%200.2)%22%2C%22rgba(54%2C%20162%2C%20235%2C%200.2)%22%5D%2C%22borderColor%22%3A%5B%22rgba(75%2C%20192%2C%20192%2C%201)%22%2C%22rgba(54%2C%20162%2C%20235%2C%201)%22%5D%2C%22borderWidth%22%3A1%7D%5D%7D%2C%22options%22%3A%7B%22scales%22%3A%7B%22yAxes%22%3A%5B%7B%22ticks%22%3A%7B%22max%22%3A7000000%2C%22min%22%3A0%2C%22stepSize%22%3A1000000%2C%22beginAtZero%22%3Atrue%7D%2C%22stacked%22%3Afalse%7D%5D%2C%22xAxes%22%3A%7B%22stacked%22%3Afalse%7D%7D%2C%22plugins%22%3A%7B%22title%22%3A%7B%22display%22%3Atrue%2C%22text%22%3A%22Total%20Population%20Comparison%20between%20Kedah%20and%20Selangor%20in%202015%22%7D%2C%22legend%22%3A%7B%22display%22%3Atrue%2C%22position%22%3A%22top%22%7D%7D%7D%7D`;

        // Test pattern
        const bareUrlPattern = /https?:\/\/quickchart\.io\/chart\?[^\s)]+/gi;
        const matches = testContent.match(bareUrlPattern);

        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = `
            <p><strong>Pattern matches found:</strong> ${matches ? matches.length : 0}</p>
            <p><strong>First match:</strong> ${matches ? matches[0] : 'None'}</p>
        `;

        console.log('üîç Chart detection test complete');
        console.log('üîç Matches found:', matches ? matches.length : 0);
        console.log('üîç First match:', matches ? matches[0] : 'None');

        // Test if the URL is accessible
        if (matches) {
            const testImg = new Image();
            testImg.onload = () => console.log('‚úÖ URL is accessible and loads correctly');
            testImg.onerror = () => console.log('‚ùå URL is not accessible or failed to load');
            testImg.src = matches[0];
        }
    </script>
</body>
</html>